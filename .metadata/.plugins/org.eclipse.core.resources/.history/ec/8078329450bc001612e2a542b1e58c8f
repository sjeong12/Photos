<%@ page language="java" import="java.sql.*" contentType="text/html; charset=utf-8" pageEncoding="utf-8" %>
<% request.setCharacterEncoding("utf-8"); %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
 <HEAD>
  <TITLE>파일 게시판 상세보기</TITLE>
 </HEAD>

<script language=javascript>
function submit_modify()
{
	document.fview.action = "boardDmodify.jsp";
	document.fview.submit();
}

function submit_delete()
{
	document.fview.action = "boardDdelConfirm.jsp";
	document.fview.submit();
}

function submit_list()
{
	document.fview.action = "boardDlist.jsp";
	document.fview.submit();
}

</script>

<%@ include file = "/include/dbinfo.inc" %>		

<%
PreparedStatement pstmt = null;
ResultSet rs = null;

try
{
	//int num = Integer.parseInt(request.getParameter("pnum"));
	String code = request.getParameter("pcode");

	String strSQL = "SELECT * FROM Product WHERE Product_Code = ?";
	pstmt = con.prepareStatement(strSQL);
	pstmt.setString(1, code);
	rs = pstmt.executeQuery();

	if (rs.next() == false)
		out.print("등록된 상품이 없습니다");
	else
	{
		String name				= rs.getString("Product_Name");
		String price			= rs.getString("product_Price");
		String info		 		= rs.getString("Product_Info");
		String popular  		= rs.getString("Product_Popular");
		int amount				= rs.getInt("Product_Amount");
		int sub_category_num	= rs.getInt("SubCategory_Num");
		String image 			= rs.getString("Product_Image");
		
		String ext1     = null;
		if (image != null && !image.equals("")) {
			ext1 =  image.substring(image.indexOf(".") + 1);
		}
%>

		<BODY>
		<TABLE WIDTH = "500" BORDER = "1" CellPadding = "0" CellSpacing = "0">
			<TR>
				<TD WIDTH = "40%" ALIGN = "left">제품코드</TD>
				<TD WIDTH = "60%" ALIGN = "left" COLSPAN = "3"><%= code %></TD>
			</TR>
			<TR>
				<TD WIDTH = "40%" ALIGN = "left">제품명</TD>
				<TD WIDTH = "60%" ALIGN = "left" COLSPAN = "3"><%= name %></TD>
			</TR>
			<TR>
				<TD WIDTH = "20%" ALIGN = "left">개수</TD>
				<TD WIDTH = "30%" ALIGN = "left"><%= amount %></TD>
				<TD WIDTH = "20%" ALIGN = "left">인기도</TD>
				<TD WIDTH = "30%" ALIGN = "left"><%= popular %></TD>
			</TR>
			<TR>
				<TD WIDTH = "40%" ALIGN = "left">이미지</TD>
				<TD WIDTH = "60%" ALIGN = "left" COLSPAN = "3">
<%
		if (image != null) {
			ext1 = ext1.toLowerCase();
		if (ext1.equals("jpg") || ext1.equals("bmp") || ext1.equals("gif") || ext1.equals("png"))
			out.print ("<IMG SRC='/LSJ_PHOTO/productImage/" + image +"' width=100 height=100>");
		else
			out.print ("<A HREF='boardDfiledown.jsp?pcode=" + code +"&ftype=1'><IMG SRC='./icon_file.gif'> " + image + "</A>");
		}

%>
				</TD>
			</TR>
			<TR>
				<TD WIDTH = "40%" ALIGN = "left">제품설명</TD>
				<TD WIDTH = "60%" ALIGN = "left" COLSPAN = "3">
					<TEXTAREA NAME="contents" ROWS=5 COLS=80 disabled><%= info %></TEXTAREA>
				</TD>
			</TR>
			<TR>
				<TD WIDTH = "100%" ALIGN = "center" COLSPAN = "4">
				<FORM NAME = "fview" METHOD = "post">
				<INPUT TYPE = "hidden" NAME = pcode VALUE = <%= code %>>
				<TABLE>
					<TR>
						<TD WIDTH = "100%" ALIGN = "center" COLSPAN = "4">
							<INPUT TYPE = "button" VALUE = "수정하기" onclick = "submit_modify()">

							<INPUT TYPE = "button" VALUE = "삭제하기" onclick = "submit_delete()">

							<INPUT TYPE = "button" VALUE = "목록으로" onclick = "submit_list()">
						</TD>
					</TR>
				</TABLE>
				</FORM>
				</TD>
			</TR>
		</TABLE>
		</BODY>
<%
}
} //try end


catch(SQLException e1){
	out.println(e1.getMessage());
} // catch SQLException end

catch(Exception e2){
	e2.printStackTrace();
} // catch Exception end

finally{
	if (pstmt != null) pstmt.close();
	if (rs    != null) rs.close();
	if (con   != null) con.close();
} // finally end
%>
</HTML>